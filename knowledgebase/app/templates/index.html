{% extends "base.html" %}

{% block title %}Home - Knowledge Base{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <div class="hero-section">
        <h1 class="hero-title">Welcome to the Knowledge Base</h1>
        <p class="hero-subtitle">Your comprehensive resource for information and documentation</p>
    </div>

    <!-- Categories Section -->
    <section class="categories-section">
        <h2 class="section-title">Browse Categories</h2>
        
        {% if categories %}
            <div class="categories-grid">
                {% for category in categories %}
                    <a href="{{ url_for('main.category', slug=category.slug) }}" class="category-card">
                        <div class="category-icon">üìÅ</div>
                        <h3 class="category-name">{{ category.name }}</h3>
                        <p class="category-description">
                            {{ category.description[:100] + '...' if category.description and category.description|length > 100 else category.description or 'Explore this category' }}
                        </p>
                        <div class="category-meta">
                            <span>{{ category.articles.filter_by(is_published=True).count() }} articles</span>
                        </div>
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <p>No categories available yet.</p>
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('admin.categories') }}" class="btn btn-primary">Create First Category</a>
                {% endif %}
            </div>
        {% endif %}
    </section>

    <!-- Featured Articles -->
    {% if featured_articles %}
    <section class="featured-section">
        <h2 class="section-title">Featured Articles</h2>
        <div class="articles-grid">
            {% for article in featured_articles %}
                <a href="{{ url_for('main.article', slug=article.slug) }}" class="article-card">
                    <div class="article-header">
                        <span class="article-badge">‚≠ê Featured</span>
                    </div>
                    <h3 class="article-title">{{ article.title }}</h3>
                    <p class="article-summary">
                        {{ article.summary[:150] + '...' if article.summary and article.summary|length > 150 else article.summary or article.content[:150] + '...' }}
                    </p>
                    <div class="article-meta">
                        <span class="article-category">{{ article.category.name }}</span>
                        <span class="article-date">{{ article.created_at.strftime('%b %d, %Y') }}</span>
                    </div>
                </a>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <!-- Recent Articles -->
    {% if recent_articles %}
    <section class="recent-section">
        <h2 class="section-title">Recent Articles</h2>
        <div class="articles-list">
            {% for article in recent_articles[:5] %}
                <a href="{{ url_for('main.article', slug=article.slug) }}" class="article-list-item">
                    <div class="article-list-content">
                        <h4 class="article-list-title">{{ article.title }}</h4>
                        <p class="article-list-meta">
                            <span>{{ article.category.name }}</span>
                            {% if article.subcategory %}
                                <span> / {{ article.subcategory.name }}</span>
                            {% endif %}
                            <span> ‚Ä¢ {{ article.created_at.strftime('%b %d, %Y') }}</span>
                        </p>
                    </div>
                    <div class="article-list-arrow">‚Üí</div>
                </a>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</div>

<style>
.hero-section {
    text-align: center;
    padding: var(--spacing-2xl) 0;
    margin-bottom: var(--spacing-2xl);
}

.hero-title {
    font-size: 3rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
    background: linear-gradient(135deg, var(--accent-blue-light), var(--accent-blue));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-subtitle {
    font-size: 1.25rem;
    color: var(--text-secondary);
}

.section-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xl);
}

.categories-section,
.featured-section,
.recent-section {
    margin-bottom: var(--spacing-2xl);
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--spacing-lg);
}

.category-card {
    background: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    text-decoration: none;
    transition: all 0.3s;
    display: block;
}

.category-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--accent-blue);
}

.category-icon {
    font-size: 3rem;
    margin-bottom: var(--spacing-md);
}

.category-name {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.category-description {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
    line-height: 1.5;
}

.category-meta {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: var(--spacing-lg);
}

.article-card {
    background: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    text-decoration: none;
    display: block;
    transition: all 0.3s;
}

.article-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--accent-blue);
}

.article-header {
    margin-bottom: var(--spacing-md);
}

.article-badge {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--accent-blue);
    color: white;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    font-weight: 500;
}

.article-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.article-summary {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
    line-height: 1.5;
}

.article-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--text-muted);
    font-size: 0.9rem;
}

.article-category {
    color: var(--accent-blue-light);
}

.articles-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.article-list-item {
    background: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    text-decoration: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s;
}

.article-list-item:hover {
    border-color: var(--accent-blue);
    background: var(--tertiary-bg);
}

.article-list-content {
    flex: 1;
}

.article-list-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.article-list-meta {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.article-list-arrow {
    font-size: 1.5rem;
    color: var(--text-muted);
}

.empty-state {
    text-align: center;
    padding: var(--spacing-2xl);
    color: var(--text-secondary);
}

@media (max-width: 768px) {
    .hero-title {
        font-size: 2rem;
    }
    
    .categories-grid,
    .articles-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}
